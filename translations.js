// Translation System for Kiosk
const translations = {
    english: {
        // Language Page
        selectLanguage: "SELECT LANGUAGE",
        diningPreference: "DINING PREFERENCE",
        eatIn: "EAT IN",
        takeAway: "TAKE AWAY",
        proceedToMenu: "PROCEED TO MENU",
        
        // Menu Page
        riceMenu: "RICE MENU",
        noodlesMenu: "NOODLES MENU",
        sidesMenu: "SIDES MENU",
        drinksMenu: "DRINKS MENU",
        rice: "RICE",
        noodles: "NOODLES",
        sides: "SIDES",
        drinks: "DRINKS",
        back: "← BACK",
        cart: "CART",
        
        // Menu Items
        "Fried Rice from Kampung": "Fried Rice from Kampung",
        "Chicken Fried Rice": "Chicken Fried Rice",
        "Hainanese Chicken Rice": "Hainanese Chicken Rice",
        "Hainan Chicken Chop": "Hainan Chicken Chop",
        "Turmeric Rice": "Turmeric Rice",
        "Chicken Porridge": "Chicken Porridge",
        "Nasi Lemak with Fried Chicken": "Nasi Lemak with Fried Chicken",
        "Nasi Lemak with Sambal Chicken": "Nasi Lemak with Sambal Chicken",
        "Regular Nasi Lemak": "Regular Nasi Lemak",
        "Nasi Goreng Ali": "Nasi Goreng Ali",
        "Mee Goreng": "Mee Goreng",
        "Mee Soto": "Mee Soto",
        "Mee Rebus": "Mee Rebus",
        "Bihun Goreng": "Bihun Goreng",
        "Bihun Soto": "Bihun Soto",
        "Kuey Teow": "Kuey Teow",
        "Prawn Noodle": "Prawn Noodle",
        "Cantonese Noodles": "Cantonese Noodles",
        "Assam Laksa": "Assam Laksa",
        "Ah Hock Ken Mee": "Ah Hock Ken Mee",
        "Crispy Chicken": "Crispy Chicken",
        "Nasi Lemak": "Nasi Lemak",
        
        // Cart Page
        cart: "Cart",
        quantity: "Quantity",
        total: "Total",
        addOrder: "ADD ORDER",
        pay: "PAY",
        customOrder: "Custom Order",
        remove: "REMOVE",
        yourCartIsEmpty: "Your cart is empty",
        continueShopping: "Continue Shopping",
        
        // Order Customization
        customise: "CUSTOMISE",
        item1: "Item 1 - RM 2.50",
        item2: "Item 2 - RM 5.00", 
        item3: "Item 3 - RM 0.50",
        customizationPrice: "Customization Price",
        cancel: "CANCEL",
        saveChanges: "SAVE CHANGES",
        changesSavedSuccessfully: "Changes saved successfully!",
        
        // Payment Page
        payment: "PAYMENT",
        orderSummary: "Order Summary",
        paymentMethod: "Payment Method",
        creditDebitCard: "Credit/Debit Card",
        touchNGo: "Touch 'n Go",
        qrCode: "QR Code",
        cashAtCounter: "Cash at Counter",
        backToCart: "BACK TO CART",
        completeOrder: "COMPLETE ORDER",
        
        // Payment Success
        paymentSuccess: "PAYMENT SUCCESS",
        orderCompleted: "Order Completed!",
        thankYouForOrder: "Thank you for your order! Your payment has been processed successfully.",
        yourDeliciousMeal: "Your delicious meal will be ready soon!",
        paymentMethodLabel: "Payment Method:",
        totalAmount: "Total Amount:",
        orderTime: "Order Time:",
        orderAgain: "ORDER AGAIN",
        viewMenu: "VIEW MENU"
    },
    bahasa: {
        // Language Page
        selectLanguage: "PILIH BAHASA",
        diningPreference: "PILIHAN MAKAN",
        eatIn: "MAKAN DI SINI",
        takeAway: "BAWA BALIK",
        proceedToMenu: "TERUSKAN KE MENU",
        
        // Menu Page
        riceMenu: "MENU NASI",
        noodlesMenu: "MENU MEE",
        sidesMenu: "MENU SAMPINGAN",
        drinksMenu: "MENU MINUMAN",
        rice: "NASI",
        noodles: "MEE",
        sides: "SAMPINGAN",
        drinks: "MINUMAN",
        back: "← KEMBALI",
        cart: "TROLI",
        
        // Menu Items
        "Fried Rice from Kampung": "Nasi Goreng Kampung",
        "Chicken Fried Rice": "Nasi Goreng Cina",
        "Hainanese Chicken Rice": "Nasi Ayam Hainan",
        "Hainan Chicken Chop": "Ayam Chop Hainan",
        "Turmeric Rice": "Nasi Kunyit",
        "Chicken Porridge": "Bubur Ayam",
        "Nasi Lemak with Fried Chicken": "Nasi Lemak Ayam Goreng",
        "Nasi Lemak with Sambal Chicken": "Nasi Lemak Ayam Sambal",
        "Regular Nasi Lemak": "Nasi Lemak Biasa",
        "Nasi Goreng Ali": "Nasi Goreng Ali",
        "Mee Goreng": "Mee Goreng",
        "Mee Soto": "Mee Soto",
        "Mee Rebus": "Mee Rebus",
        "Bihun Goreng": "Bihun Goreng",
        "Bihun Soto": "Bihun Soto",
        "Kuey Teow": "Kuey Teow",
        "Prawn Noodle": "Mee Udang",
        "Cantonese Noodles": "Mee Kantonis",
        "Assam Laksa": "Assam Laksa",
        "Ah Hock Ken Mee": "Ah Hock Ken Mee",
        "Crispy Chicken": "Ayam Crispy",
        "Nasi Lemak": "Nasi Lemak",
        
        // Cart Page
        cart: "Troli",
        quantity: "Kuantiti",
        total: "Jumlah",
        addOrder: "TAMBAH PESANAN",
        pay: "BAYAR",
        customOrder: "Pesanan Khas",
        remove: "BUANG",
        yourCartIsEmpty: "Troli anda kosong",
        continueShopping: "Teruskan Membeli-belah",
        
        // Order Customization
        customise: "KANUN",
        item1: "Item 1 - RM 2.50",
        item2: "Item 2 - RM 5.00", 
        item3: "Item 3 - RM 0.50",
        customizationPrice: "Harga Penyesuaian",
        cancel: "BATAL",
        saveChanges: "SIMPAN PERUBAHAN",
        changesSavedSuccessfully: "Perubahan berjaya disimpan!",
        
        // Payment Page
        payment: "PEMBAYARAN",
        orderSummary: "Ringkasan Pesanan",
        paymentMethod: "Kaedah Pembayaran",
        creditDebitCard: "Kad Kredit/Debit",
        touchNGo: "Touch 'n Go",
        qrCode: "Kod QR",
        cashAtCounter: "Tunai di Kaunter",
        backToCart: "KEMBALI KE TROLI",
        completeOrder: "LENGKAPKAN PESANAN",
        
        // Payment Success
        paymentSuccess: "PEMBAYARAN BERJAYA",
        orderCompleted: "Pesanan Selesai!",
        thankYouForOrder: "Terima kasih atas pesanan anda! Pembayaran telah diproses dengan jayanya.",
        yourDeliciousMeal: "Makanan lazat anda akan siap tidak lama lagi!",
        paymentMethodLabel: "Kaedah Pembayaran:",
        totalAmount: "Jumlah Keseluruhan:",
        orderTime: "Masa Pesanan:",
        orderAgain: "PESAN LAGI",
        viewMenu: "LIHAT MENU"
    },
    chinese: {
        // Language Page
        selectLanguage: "选择语言",
        diningPreference: "用餐选择",
        eatIn: "堂食",
        takeAway: "外带",
        proceedToMenu: "进入菜单",
        
        // Menu Page
        riceMenu: "饭类菜单",
        noodlesMenu: "面类菜单",
        sidesMenu: "配菜菜单",
        drinksMenu: "饮料菜单",
        rice: "饭类",
        noodles: "面类",
        sides: "配菜",
        drinks: "饮料",
        back: "← 返回",
        cart: "购物车",
        
        // Menu Items
        "Fried Rice from Kampung": "甘榜炒饭",
        "Chicken Fried Rice": "鸡肉炒饭",
        "Hainanese Chicken Rice": "海南鸡饭",
        "Hainan Chicken Chop": "海南鸡扒",
        "Turmeric Rice": "黄姜饭",
        "Chicken Porridge": "鸡肉粥",
        "Nasi Lemak with Fried Chicken": "椰浆饭配炸鸡",
        "Nasi Lemak with Sambal Chicken": "椰浆饭配参巴鸡",
        "Regular Nasi Lemak": "普通椰浆饭",
        "Nasi Goreng Ali": "阿里炒饭",
        "Mee Goreng": "马来炒面",
        "Mee Soto": "马来汤面",
        "Mee Rebus": "卤面",
        "Bihun Goreng": "炒米粉",
        "Bihun Soto": "汤米粉",
        "Kuey Teow": "粿条",
        "Prawn Noodle": "虾面",
        "Cantonese Noodles": "广式面",
        "Assam Laksa": "亚参叻沙",
        "Ah Hock Ken Mee": "亚福建面",
        "Crispy Chicken": "香脆鸡",
        "Nasi Lemak": "椰浆饭",
        
        // Cart Page
        cart: "购物车",
        quantity: "数量",
        total: "总计",
        addOrder: "添加订单",
        pay: "支付",
        customOrder: "自定义订单",
        remove: "移除",
        yourCartIsEmpty: "您的购物车是空的",
        continueShopping: "继续购物",
        
        // Order Customization
        customise: "自定义",
        item1: "项目 1",
        item2: "项目 2", 
        item3: "项目 3",
        customizationPrice: "自定义价格",
        cancel: "取消",
        saveChanges: "保存更改",
        changesSavedSuccessfully: "更改保存成功！",
        
        // Payment Page
        payment: "支付",
        orderSummary: "订单摘要",
        paymentMethod: "支付方式",
        creditDebitCard: "信用卡/借记卡",
        touchNGo: "Touch 'n Go",
        qrCode: "二维码",
        cashAtCounter: "柜台现金支付",
        backToCart: "返回购物车",
        completeOrder: "完成订单",
        
        // Payment Success
        paymentSuccess: "支付成功",
        orderCompleted: "订单完成！",
        thankYouForOrder: "感谢您的订单！您的付款已成功处理。",
        yourDeliciousMeal: "您的美味餐点很快就会准备好！",
        paymentMethodLabel: "支付方式：",
        totalAmount: "总金额：",
        orderTime: "订单时间：",
        orderAgain: "再次订购",
        viewMenu: "查看菜单"
    },
    tamil: {
        // Language Page
        selectLanguage: "மொழியைத் தேர்ந்தெடுக்கவும்",
        diningPreference: "உணவு விருப்பம்",
        eatIn: "இங்கே சாப்பிடவும்",
        takeAway: "எடுத்துச் செல்லவும்",
        proceedToMenu: "மெனுவுக்குச் செல்லவும்",
        
        // Menu Page
        riceMenu: "சாதம் மெனு",
        noodlesMenu: "நூடுல்ஸ் மெனு",
        sidesMenu: "பக்க உணவுகள் மெனு",
        drinksMenu: "பானங்கள் மெனு",
        rice: "சாதம்",
        noodles: "நூடுல்ஸ்",
        sides: "பக்க உணவுகள்",
        drinks: "பானங்கள்",
        back: "← திரும்பு",
        cart: "வண்டி",
        
        // Menu Items
        "Fried Rice from Kampung": "கம்போங் வறுத்த சாதம்",
        "Chicken Fried Rice": "சிக்கன் வறுத்த சாதம்",
        "Hainanese Chicken Rice": "ஹைனானீஸ் சிக்கன் சாதம்",
        "Hainan Chicken Chop": "ஹைனான் சிக்கன் சாப்",
        "Turmeric Rice": "மஞ்சள் சாதம்",
        "Chicken Porridge": "சிக்கன் கஞ்சி",
        "Nasi Lemak with Fried Chicken": "நாசி லெமாக் வறுத்த கோழியுடன்",
        "Nasi Lemak with Sambal Chicken": "நாசி லெமாக் சம்பல் கோழியுடன்",
        "Regular Nasi Lemak": "சாதாரண நாசி லெமாக்",
        "Nasi Goreng Ali": "நாசி கோரெங் அலி",
        "Mee Goreng": "மீ கோரெங்",
        "Mee Soto": "மீ சோட்டோ",
        "Mee Rebus": "மீ ரெபஸ்",
        "Bihun Goreng": "பிஹுன் கோரெங்",
        "Bihun Soto": "பிஹுன் சோட்டோ",
        "Kuey Teow": "குவே டியோ",
        "Prawn Noodle": "இறால் நூடுல்",
        "Cantonese Noodles": "காண்டனீஸ் நூடுல்ஸ்",
        "Assam Laksa": "அஸ்ஸாம் லக்சா",
        "Ah Hock Ken Mee": "ஆ ஹாக் கென் மீ",
        "Crispy Chicken": "மிருதுவான கோழி",
        "Nasi Lemak": "நாசி லெமாக்",
        
        // Cart Page
        cart: "வண்டி",
        quantity: "அளவு",
        total: "மொத்தம்",
        addOrder: "ஆர்டர் சேர்",
        pay: "பணம் செலுத்து",
        customOrder: "தனிப்பயன் ஆர்டர்",
        remove: "நீக்கு",
        yourCartIsEmpty: "உங்கள் வண்டி காலியாக உள்ளது",
        continueShopping: "ஷாப்பிங் தொடர",
        
        // Order Customization
        customise: "தனிப்பயனாக்கு",
        item1: "உருப்படி 1",
        item2: "உருப்படி 2", 
        item3: "உருப்படி 3",
        customizationPrice: "தனிப்பயனாக்கல் விலை",
        cancel: "ரத்து செய்",
        saveChanges: "மாற்றங்களை சேமி",
        changesSavedSuccessfully: "மாற்றங்கள் வெற்றிகரமாக சேமிக்கப்பட்டன!",
        
        // Payment Page
        payment: "பணம் செலுத்துதல்",
        orderSummary: "ஆர்டர் சுருக்கம்",
        paymentMethod: "பணம் செலுத்தும் முறை",
        creditDebitCard: "கிரெடிட்/டெபிட் கார்டு",
        touchNGo: "Touch 'n Go",
        qrCode: "QR கோட்",
        cashAtCounter: "கவுண்டரில் பணம்",
        backToCart: "வண்டிக்கு திரும்பு",
        completeOrder: "ஆர்டரை முடிக்கவும்",
        
        // Payment Success
        paymentSuccess: "பணம் செலுத்துதல் வெற்றி",
        orderCompleted: "ஆர்டர் முடிந்தது!",
        thankYouForOrder: "உங்கள் ஆர்டருக்கு நன்றி! உங்கள் பணம் செலுத்துதல் வெற்றிகரமாக செயல்படுத்தப்பட்டது.",
        yourDeliciousMeal: "உங்கள் சுவையான உணவு விரைவில் தயாராக இருக்கும்!",
        paymentMethodLabel: "பணம் செலுத்தும் முறை:",
        totalAmount: "மொத்த தொகை:",
        orderTime: "ஆர்டர் நேரம்:",
        orderAgain: "மீண்டும் ஆர்டர் செய்",
        viewMenu: "மெனுவைக் காண்க"
    }
};

// Function to get translation
function getTranslation(key) {
    const selectedLang = localStorage.getItem('selectedLanguage') || 'english';
    return translations[selectedLang][key] || key;
}

// Function to apply translations to page
function applyTranslations() {
    const selectedLang = localStorage.getItem('selectedLanguage') || 'english';
    
    // Translate elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        element.textContent = translations[selectedLang][key] || key;
    });
    
    // Translate elements with data-translate-attr attribute (for data-text attributes)
    document.querySelectorAll('[data-translate-attr]').forEach(element => {
        const key = element.getAttribute('data-translate-attr');
        element.setAttribute('data-text', translations[selectedLang][key] || key);
    });
}

// Timeout System - 5 minutes inactivity redirect
let inactivityTimer;
const INACTIVITY_TIMEOUT = 5 * 60 * 1000; // 5 minutes in milliseconds

function resetInactivityTimer() {
    clearTimeout(inactivityTimer);
    inactivityTimer = setTimeout(() => {
        // Clear any stored data
        localStorage.removeItem('amakiosk_cart');
        localStorage.removeItem('amakiosk_customization');
        localStorage.removeItem('amakiosk_order_details');
        
        // Redirect to flash page first, then to index.html
        window.location.href = 'flashpage.html';
    }, INACTIVITY_TIMEOUT);
}

function initializeInactivityTimer() {
    // Reset timer on any user interaction
    const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart', 'click'];
    events.forEach(event => {
        document.addEventListener(event, resetInactivityTimer, true);
    });
    
    // Start the timer
    resetInactivityTimer();
}
